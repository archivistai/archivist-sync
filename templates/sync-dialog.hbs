<section class="archivist-sync-dialog sync-dialog-content">
    {{#if isLoading}}
    <div class="loading-panel">
        <span class="loading-spinner"></span>
        <span>Loading...</span>
    </div>
    {{else}}
    <div class="sync-toolbar">
        <button type="button" data-action="refresh" title="Refresh" class="icon-btn">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>

    <section class="panel">
        <div class="panel-header">
            <h3>Review Diffs ({{stats.diffs}})</h3>
            <div class="bulk" data-scope="diffs">
                <button type="button" data-action="selectAll">Select all</button>
                <button type="button" data-action="selectNone">Select none</button>
            </div>
        </div>
        <div class="table-wrap">
            <table class="diff-table">
                <thead>
                    <tr>
                        <th style="width: 40px;"></th>
                        <th style="width: 120px;">Type</th>
                        <th>Name</th>
                        <th style="width: 80px; text-align: center;">Title</th>
                        <th style="width: 100px; text-align: center;">Description</th>
                        <th style="width: 80px; text-align: center;">Image</th>
                        <th style="width: 80px; text-align: center;">Links</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each diffs as |d|}}
                    <tr data-kind="diff" data-id="{{d.id}}"
                        class="{{#if d.selected}}selected{{/if}} {{#if d.deleted}}deleted-row{{/if}}">
                        <td><input type="checkbox" {{#if d.selected}}checked{{/if}} data-action="toggleRow" /></td>
                        <td>{{d.type}}</td>
                        <td>
                            {{d.name}}
                            {{#if d.deleted}}<span class="badge danger">Deleted</span>{{/if}}
                        </td>
                        <td style="text-align: center;">
                            {{#if d.changes.name}}<i class="fas fa-check"
                                style="color: var(--arch-success);"></i>{{/if}}
                        </td>
                        <td style="text-align: center;">
                            {{#if d.changes.description}}<i class="fas fa-check"
                                style="color: var(--arch-success);"></i>{{/if}}
                        </td>
                        <td style="text-align: center;">
                            {{#if d.changes.image}}<i class="fas fa-check"
                                style="color: var(--arch-success);"></i>{{/if}}
                        </td>
                        <td style="text-align: center;">
                            {{#if d.changes.links}}<i class="fas fa-check"
                                style="color: var(--arch-success);"></i>{{/if}}
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </section>

    <section class="panel">
        <div class="panel-header">
            <h3>Import New ({{stats.imports}})</h3>
            <div class="bulk" data-scope="imports">
                <button type="button" data-action="selectAll">Select all</button>
                <button type="button" data-action="selectNone">Select none</button>
            </div>
        </div>
        <div class="table-wrap">
            <table class="import-table">
                <thead>
                    <tr>
                        <th style="width: 40px;"></th>
                        <th style="width: 120px;">Type</th>
                        <th>Name</th>
                        <th style="width: 140px; text-align: center;">Create New</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each imports as |r|}}
                    <tr data-kind="import" data-id="{{r.id}}" class="{{#if r.selected}}selected{{/if}}">
                        <td><input type="checkbox" {{#if r.selected}}checked{{/if}} data-action="toggleRow" /></td>
                        <td>{{r.type}}</td>
                        <td>{{r.name}}</td>
                        <td style="text-align: center;">
                            {{#if r.coreType}}
                            <label style="display: inline-flex; align-items: center; gap: 0.25rem; cursor: pointer;">
                                <input type="checkbox" data-action="toggleCore" {{#if r.createCore}}checked{{/if}} />
                                <span style="text-transform: capitalize;">{{r.coreType}}</span>
                            </label>
                            {{/if}}
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </section>

    <footer class="sync-footer">
        <button type="button" data-action="cancel" class="secondary">Cancel</button>
        <button type="button" data-action="sync" class="primary">Sync</button>
    </footer>
    {{/if}}
</section>